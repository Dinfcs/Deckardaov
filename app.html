<!DOCTYPE html>
<html>
<head>
  <title>Gestión de Cuentas</title>
  <style>
    /* Tu CSS aquí */
  </style>
</head>
<body>
  <div class="container">
    <h2>Gestión de Cuentas</h2>
    <p>Las cuentas se liberarán automáticamente después de 5 minutos de uso.</p>
    <p>Contraseña para cuentas de Lb: Deckard2023</p>
    <p>Contraseña para cuenta de PQ: uxvezy</p>
    <table id="accountTable">
      <thead>
        <tr>
          <th>Cuenta</th>
          <th>Estado</th>
          <th>Usuario Actual</th>
          <th>Hora de Uso</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <!-- Aquí se cargarán las filas de cuentas -->
      </tbody>
    </table>
  </div>
  <script>
    async function getAccountData() {
      const response = await fetch('https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec'); // URL de tu Google Apps Script
      const accounts = await response.json();
      renderAccounts(accounts);
    }

    function renderAccounts(accounts) {
      const tableBody = document.querySelector('#accountTable tbody');
      tableBody.innerHTML = '';

      accounts.forEach(account => {
        const row = document.createElement('tr');
        const statusClass = account.status === 'Libre' ? 'status-free' : 'status-in-use';

        const actionButton = account.status === 'Libre' 
          ? `<button onclick="useAccount('${account.name}')">Usar</button>`
          : `<button onclick="extendAccount('${account.name}')">Extender</button> 
             <button onclick="releaseAccount('${account.name}')">Liberar</button>`;

        row.innerHTML = `
          <td>${account.name}</td>
          <td class="${statusClass}">${account.status}</td>
          <td>${account.currentUser || ''}</td>
          <td>${account.time}</td>
          <td>${actionButton}</td>
        `;

        tableBody.appendChild(row);
      });
    }

    async function useAccount(accountName) {
      const response = await fetch('https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec', {
        method: 'POST',
        body: JSON.stringify({ action: 'useAccount', accountName: accountName })
      });
      const result = await response.json();
      showNotification(result.message, result.success ? 'success' : 'error');
      getAccountData();
    }

    async function extendAccount(accountName) {
      const response = await fetch('https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec', {
        method: 'POST',
        body: JSON.stringify({ action: 'extendAccount', accountName: accountName })
      });
      const result = await response.json();
      showNotification(result.message, result.success ? 'success' : 'error');
      getAccountData();
    }

    async function releaseAccount(accountName) {
      const response = await fetch('https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec', {
        method: 'POST',
        body: JSON.stringify({ action: 'releaseAccount', accountName: accountName })
      });
      const result = await response.json();
      showNotification(result.message, result.success ? 'success' : 'error');
      getAccountData();
    }

    function showNotification(message, type) {
      const notification = document.createElement('div');
      notification.className = `notification notification-${type}`;
      notification.textContent = message;

      document.body.appendChild(notification);
      setTimeout(() => notification.style.opacity = 1, 100);

      setTimeout(() => {
        notification.style.opacity = 0;
        setTimeout(() => document.body.removeChild(notification), 500);
      }, 3000);
    }

    document.addEventListener('DOMContentLoaded', getAccountData);
  </script>
</body>
</html>
