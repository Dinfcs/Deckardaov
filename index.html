
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formatted Address</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('background.png');
            background-size: cover;
            background-repeat: no-repeat;
            margin: 0;
            padding: 40px;
            line-height: 1.5;
        }
        .wrapper {
            display: flex;
            justify-content: space-between;
            max-width: 1500px;
            margin: 0 auto;
        }
        .container, .address-format-container {
            flex: 1;
            padding: 20px;
            box-sizing: border-box;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .container {
            margin-left: 20px;
        }
        .form-container {
            text-align: left;
        }
        input[type="text"] {
            width: calc(100% - 20px);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 15px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="address-format-container">
            <h2>Address Formats</h2>
            <p><strong>General Format:</strong><br>[House number] [Street name], [City], [STATE ABBREVIATION] [zip code]</p>
            <p><strong>Example:</strong><br>8245 E Bell Rd, Scottsdale, AZ 85260</p>
            <p><strong>If it includes a Unit:</strong><br>8245 E Bell Rd Unit 229, Scottsdale, AZ 85260</p>
            <p><strong>NO_MATCH_FOUND- If you know the main address and not the Unit:</strong><br>8245 E Bell Rd Unit # unk, Scottsdale, AZ 85260</p>
            <p><strong>The address override in Australia. For example:</strong><br>65 Henderson St, Camp Hill, QLD 4152</p>
            <p><strong>If it includes a Unit:</strong><br>6904/222 Margaret St, Brisbane City, QLD 4000</p>
            <p><strong>NO_MATCH_FOUND If you know the building and not the Unit Australia:</strong><br>Unit # unk/222 Margaret St, Brisbane City, QLD 4000</p>
            <p><strong>The address override in Bass Coast Shire, AUS does not include the state abbreviation. For example:</strong><br>7 Gilmore St, Smiths Beach 3922</p>
            <p><strong>If it includes a Unit:</strong><br>101/59 Chapel St, Cowes 3922</p>
            <p><strong>NO_MATCH_FOUND-If you know the building and not the Unit in the City Bass Coast Shire, AUS:</strong><br>Unit # unk/59 Chapel St, Cowes 3922</p>
        </div>

        <div class="container">
            <div class="form-container">
                <h2>Enter an unformatted address:</h2>
                <form id="addressForm">
                    <input type="text" id="addressInput" name="address" placeholder="Example: 319 ANTELOPE AVE PAGOSA SPRINGS CO 81147" autocomplete="off" required>
                </form>
                <h2>Formatted Address:</h2>
                <p id="formattedAddress"></p>
                <button id="copyButton">Copy</button>

            </div>
        </div>
    </div>

    <script>
        document.getElementById("addressInput").addEventListener("input", function() {
            processAddress();
        });

        document.getElementById("copyButton").addEventListener("click", function() {
            copyToClipboard(document.getElementById("formattedAddress").textContent);
        });

        document.getElementById("copyButtonWithUnit").addEventListener("click", function() {
            copyToClipboard(document.getElementById("formattedAddressWithUnit").textContent);
        });

        function processAddress() {
            let inputAddress = document.getElementById("addressInput").value;
            let formattedAddress = formatAddress(inputAddress);

            // Verificar si la direcci√≥n contiene alguna palabra clave y agregar "Unit # unk"
            const keywords = ["ave", "blvd", "cir", "ct", "ct", "dr", "expy", "fwy", "ln", "pkwy", "pl", "rd", "sq", "st", "ter", "tpke", "way", "aly", "br", "brg", "brk", "bg", "byp", "cp", "cyn", "cpe", "cswy", "ctr", "clf", "clb", "cor", "cv", "crk", "cres", "xing", "dl", "dm", "dv", "est", "fall", "fry", "fld", "flt", "frd", "frst", "frg", "frk", "ft", "gdn", "gtwy", "gln", "grn", "grv", "hbr", "hvn", "hts", "hl", "holw", "inlt", "is", "jct", "ky", "knl", "lk", "lndg", "lgt", "lf", "lck", "ldg", "loop", "mall", "mnr", "mdw", "ml", "msn", "mtwy", "mt", "nck", "orch", "oval", "pass", "path", "pike", "pne", "pln", "plz", "pt", "prt", "pr", "radl", "rnch", "rpd", "rst", "rdg", "riv", "row", "run", "shl", "shr", "spg", "spur", "sta", "stra", "strm", "smt", "trce", "trak", "trfy", "trl", "tunl", "un", "vly", "via", "vw", "vlg", "vl", "vis", "walk", "wls", "w","ne", "se", "sw", "nw"];
            let addressWithoutUnit = formattedAddress;
            let addressWithUnit = formattedAddress;

            for (let i = 0; i < keywords.length; i++) {
                if (addressWithUnit.includes(keywords[i])) {
                    addressWithUnit = addressWithUnit.replace(keywords[i], keywords[i] + " Unit # unk");
                    break;
                }
            }

            addressWithoutUnit = addressWithoutUnit.replace(/(UNIT|Unit)\s+(\w+)/gi, (match, unit, value) => `${unit} ${value.toUpperCase()},`);
            addressWithoutUnit = addressWithoutUnit.replace(/#\s+(\w+)/g, (match, value) => `Unit ${value.toUpperCase()},`);
            addressWithoutUnit = addressWithoutUnit.replace(/Apt\s+(\w+)/g, (match, value) => `Unit ${value.toUpperCase()},`);
            const commaIndices = getAllIndexes(addressWithoutUnit, ",");
            if (commaIndices.length >= 3) {
                addressWithoutUnit = addressWithoutUnit.replace(",", "");
            }

            const countUnit = (addressWithUnit.match(/Unit/g) || []).length;
            const countHash = (addressWithUnit.match(/#/g) || []).length;
            if (countUnit === 2 || countHash === 2) {
                addressWithUnit = "The address provided does not comply with NMF conditions";
            }

            addressWithoutUnit = replaceKeywordsWithAbbreviations(addressWithoutUnit);
            addressWithUnit = replaceKeywordsWithAbbreviations(addressWithUnit);

            addressWithoutUnit = addressWithoutUnit.replace(/,+/g, ',');
            addressWithoutUnit = validateDirectionAfterComma(addressWithoutUnit);
            addressWithUnit = validateDirectionAfterComma(addressWithUnit);
            document.getElementById("formattedAddress").textContent = addressWithoutUnit;
            document.getElementById("formattedAddressWithUnit").textContent = addressWithUnit;
        }

        function replaceKeywordsWithAbbreviations(address) {
const replacements = {
    "Avenue": "Ave",
    "Boulevard": "Blvd",
    "Circle": "Cir",
    "Court": "Ct",
    "CT": "Ct",
    "Drive": "Dr",
    "Expressway": "Expy",
    "Freeway": "Fwy",
    "Lane": "Ln",
    "Parkway": "Pkwy",
    "Place": "Pl",
    "Road": "Rd",
    "Square": "Sq",
    "Street": "St",
    "Terrace": "Ter",
    "Turnpike": "Tpke",
    "Way": "Way",
    "Alley": "Aly",
    "Branch": "Br",
    "Bridge": "Brg",
    "Brook": "Brk",
    "Burg": "Bg",
    "Bypass": "Byp",
    "Camp": "Cp",
    "Canyon": "Cyn",
    "Cape": "Cpe",
    "Causeway": "Cswy",
    "Center": "Ctr",
    "Cliff": "Clf",
    "Club": "Clb",
    "Corner": "Cor",
    "Cove": "Cv",
    "Creek": "Crk",
    "Crescent": "Cres",
    "Crossing": "Xing",
    "Dale": "Dl",
    "Dam": "Dm",
    "Divide": "Dv",
    "Estate": "Est",
    "Fall": "Fall",
    "Ferry": "Fry",
    "Field": "Fld",
    "Flats": "Flt",
    "Ford": "Frd",
    "Forest": "Frst",
    "Forge": "Frg",
    "Fork": "Frk",
    "Fort": "Ft",
    "Garden": "Gdn",
    "Gateway": "Gtwy",
    "Glen": "Gln",
    "Green": "Grn",
    "Grove": "Grv",
    "Harbor": "Hbr",
    "Haven": "Hvn",
    "Heights": "Hts",
    "Hill": "Hl",
    "Hollow": "Holw",
    "Inlet": "Inlt",
    "Island": "Is",
    "Junction": "Jct",
    "Key": "Ky",
    "Knoll": "Knl",
    "Lake": "Lk",
    "Landing": "Lndg",
    "Light": "Lgt",
    "Loaf": "Lf",
    "Lock": "Lck",
    "Lodge": "Ldg",
    "Loop": "Loop",
    "Mall": "Mall",
    "Manor": "Mnr",
    "Meadow": "Mdw",
    "Mill": "Ml",
    "Mission": "Msn",
    "Motorway": "Mtwy",
    "Mount": "Mt",
    "Neck": "Nck",
    "Orchard": "Orch",
    "Oval": "Oval",
    "Pass": "Pass",
    "Path": "Path",
    "Pike": "Pike",
    "Pine": "Pne",
    "Plain": "Pln",
    "Plaza": "Plz",
    "Point": "Pt",
    "Port": "Prt",
    "Prairie": "Pr",
    "Radial": "Radl",
    "Ranch": "Rnch",
    "Rapid": "Rpd",
    "Rest": "Rst",
    "Ridge": "Rdg",
    "River": "Riv",
    "Row": "Row",
    "Run": "Run",
    "Shoal": "Shl",
    "Shore": "Shr",
    "Spring": "Spg",
    "Spur": "Spur",
    "Station": "Sta",
    "Stravenue": "Stra",
    "Stream": "Strm",
    "Summit": "Smt",
    "Trace": "Trce",
    "Track": "Trak",
    "Trafficway": "Trfy",
    "Trail": "Trl",
    "Tunnel": "Tunl",
    "Union": "Un",
    "Valley": "Vly",
    "Viaduct": "Via",
    "View": "Vw",
    "Village": "Vlg",
    "Ville": "Vl",
    "Vista": "Vis",
    "Walk": "Walk",
    "Wells": "Wls",
    "North": "N",
    "South": "S",
    "East": "E",
    "West": "W",
    "Northeast": "NE",
    "Southeast": "SE",
    "Southwest": "SW",
    "Northwest": "NW"
};

            for (const [key, value] of Object.entries(replacements)) {
                const regex = new RegExp(`\\b${key}\\b`, 'gi');
                address = address.replace(regex, value);
            }

            return address;
        }

        function validateDirectionAfterComma(address) {
            const parts = address.split(",");
            if (parts.length > 1) {
                parts[1] = parts[1].replace(/\bN\b/g, "North").replace(/\bS\b/g, "South");
            }
            return parts.join(",");
        }

        function formatAddress(address) {
            let words = address.toLowerCase().split(" ");
            for (let i = 0; i < words.length; i++) {
                if (i === 0 || !isAbbreviation(words[i])) {
                    words[i] = capitalize(words[i]);
                }
                if (isCityAbbreviation(words[i])) {
                    words[i] = words[i].toUpperCase();
                    if (i > 0 && words[i - 1] !== ",") {
                        words.splice(i, 0, ",");
                        i++;
                    }
                }
                if (isStreetKeyword(words[i])) {
                    if (i < words.length - 1 && words[i + 1] !== ",") {
                        words.splice(i + 1, 0, ",");
                        i++;
                    }
                }
            }
            return words.join(" ").replace(/\s,+/g, ',').replace(/,+/g, ',');
        }

        function capitalize(word) {
            return word.charAt(0).toUpperCase() + word.slice(1);
        }

        function isAbbreviation(word) {
            const abbreviations = ["al", "ak", "az", "ar", "ca", "co", "ct", "de", "fl", "ga", "hi", "id", "il", "in", "ia", "ks", "ky", "la", "me", "md", "ma", "mi", "mn", "ms", "mo", "mt", "ne", "nv", "nh", "nj", "nm", "ny", "nc", "nd", "oh", "ok", "or", "pa", "ri", "sc", "sd", "tn", "tx", "ut", "vt", "va", "wa", "wv", "wi", "wy"];
            return abbreviations.includes(word.toLowerCase());
        }

        function isCityAbbreviation(word) {
            return isAbbreviation(word.toUpperCase());
        }

        function isStreetKeyword(word) {
            const keywords = ["ave", "blvd", "cir", "ct", "ct", "dr", "expy", "fwy", "ln", "pkwy", "pl", "rd", "sq", "st", "ter", "tpke", "way", "aly", "br", "brg", "brk", "bg", "byp", "cp", "cyn", "cpe", "cswy", "ctr", "clf", "clb", "cor", "cv", "crk", "cres", "xing", "dl", "dm", "dv", "est", "fall", "fry", "fld", "flt", "frd", "frst", "frg", "frk", "ft", "gdn", "gtwy", "gln", "grn", "grv", "hbr", "hvn", "hts", "hl", "holw", "inlt", "is", "jct", "ky", "knl", "lk", "lndg", "lgt", "lf", "lck", "ldg", "loop", "mall", "mnr", "mdw", "ml", "msn", "mtwy", "mt", "nck", "orch", "oval", "pass", "path", "pike", "pne", "pln", "plz", "pt", "prt", "pr", "radl", "rnch", "rpd", "rst", "rdg", "riv", "row", "run", "shl", "shr", "spg", "spur", "sta", "stra", "strm", "smt", "trce", "trak", "trfy", "trl", "tunl", "un", "vly", "via", "vw", "vlg", "vl", "vis", "walk", "wls", "w", "ne", "se", "sw", "nw"];
            return keywords.includes(word.toLowerCase());
        }

        function copyToClipboard(text) {
            const el = document.createElement('textarea');
            el.value = text;
            document.body.appendChild(el);
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
        }

        function getAllIndexes(str, subStr) {
            let indices = [];
            let index = str.indexOf(subStr);
            while (index !== -1) {
                indices.push(index);
                index = str.indexOf(subStr, index + 1);
            }
            return indices;
        }
</script>
<div id="sfchtp1bhy2rgx544ub86pr59tpalxspdr7"></div><script type="text/javascript" src="https://counter4.optistats.ovh/private/counter.js?c=htp1bhy2rgx544ub86pr59tpalxspdr7&down=async" async></script><noscript><a href="https://www.contadorvisitasgratis.com" title="contadores de visitas"><img src="https://counter4.optistats.ovh/private/contadorvisitasgratis.php?c=htp1bhy2rgx544ub86pr59tpalxspdr7" border="0" title="contadores de visitas" alt="contadores de visitas"></a></noscript>
<script src="https://www.drv.tw/inc/wd.js?s=deckardtechnologiesaov"></script></body>
</html>

